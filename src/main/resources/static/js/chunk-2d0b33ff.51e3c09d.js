(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b33ff"],{2825:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{attrs:{"grid-list-xs":"",fluid:""}},[n("SnackBar",{ref:"sb"}),n("DeleteDialog",{attrs:{title:"删除一个竞赛",content:"确定删除吗",width:"35rem"},on:{cancel:e.closeDelete,confirm:e.deleteItemConfirm},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}}),n("v-row",[n("v-col",[n("v-card",[n("div",{staticClass:"tw-flex tw-justify-between tw-items-center pa-5"},[n("div",{staticClass:"tw-font-bold tw-text-xl"},[e._v("我管理的竞赛")]),n("div",[n("div",{staticClass:"tw-inline-block mx-1"},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"竞赛id","single-line":"","hide-details":""},on:{"click:append":e.searchId},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)])]),n("v-data-table",{staticClass:"elevation-2",attrs:{headers:e.headers,items:e.tableData,options:e.options,"server-items-length":e.totalContest,loading:e.loading,"footer-props":{showFirstLastPage:!0,itemsPerPageOptions:[5,10,15]}},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.delete",fn:function(t){var i=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"item.revise",fn:function(t){var i=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")])]}},{key:"item.enter",fn:function(t){var i=t.item;return[n("v-btn",{attrs:{text:"",color:"primary",to:{name:"contestInfo",params:{contestId:i.id}}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-door-open")]),e._v(" 进入竞赛 ")],1)]}}],null,!0)})],1)],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.editingDialog,callback:function(t){e.editingDialog=t},expression:"editingDialog"}},[n("v-card",{staticClass:"pa-5"},[n("v-row",[n("v-col",[n("v-card-title",{staticClass:"text-h5"},[e._v(e._s(e.editTitle))]),n("v-card-text",[n("v-form",{ref:"form",model:{value:e.editValid,callback:function(t){e.editValid=t},expression:"editValid"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"标题不能为空"}],label:"竞赛标题",counter:20,required:""},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}}),n("v-text-field",{attrs:{rules:[],label:"竞赛描述",required:""},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}}),n("v-row",[n("v-col",[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.startDay,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.startDay=t},"update:return-value":function(t){e.startDay=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"比赛开始日期","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:[function(e){return!!e||"选择日期"}]},model:{value:e.startDay,callback:function(t){e.startDay=t},expression:"startDay"}},"v-text-field",a,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"green lighten-1","allowed-dates":e.allowedDates},model:{value:e.startDay,callback:function(t){e.startDay=t},expression:"startDay"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.startDay)}}},[e._v(" OK ")])],1)],1)],1),n("v-col",[n("v-menu",{ref:"menuTime",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.startTimeInDay,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.startTimeInDay=t},"update:return-value":function(t){e.startTimeInDay=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"设置开始日期时间","prepend-icon":"mdi-clock-time-four-outline",readonly:"",required:"",rules:[function(e){return!!e||"选择时间"}]},model:{value:e.startTimeInDay,callback:function(t){e.startTimeInDay=t},expression:"startTimeInDay"}},"v-text-field",a,!1),i))]}}]),model:{value:e.menuTime,callback:function(t){e.menuTime=t},expression:"menuTime"}},[e.menuTime?n("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.menuTime.save(e.startTimeInDay)}},model:{value:e.startTimeInDay,callback:function(t){e.startTimeInDay=t},expression:"startTimeInDay"}}):e._e()],1)],1)],1),n("v-row",[n("v-col",[n("v-menu",{ref:"menuEndDay",attrs:{"close-on-content-click":!1,"return-value":e.endDay,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.endDay=t},"update:return-value":function(t){e.endDay=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"比赛结束日期","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:[function(e){return!!e||"选择日期"}]},model:{value:e.endDay,callback:function(t){e.endDay=t},expression:"endDay"}},"v-text-field",a,!1),i))]}}]),model:{value:e.menuEndDay,callback:function(t){e.menuEndDay=t},expression:"menuEndDay"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"green lighten-1","allowed-dates":e.allowedEndDates},model:{value:e.endDay,callback:function(t){e.endDay=t},expression:"endDay"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menuEndDay=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menuEndDay.save(e.endDay)}}},[e._v(" OK ")])],1)],1)],1),n("v-col",[n("v-menu",{ref:"menuEndTime",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.endTimeInDay,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.endTimeInDay=t},"update:return-value":function(t){e.endTimeInDay=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"设置结束日期时间","prepend-icon":"mdi-clock-time-four-outline",readonly:"",required:"",rules:[function(e){return!!e||"选择时间"}]},model:{value:e.endTimeInDay,callback:function(t){e.endTimeInDay=t},expression:"endTimeInDay"}},"v-text-field",a,!1),i))]}}]),model:{value:e.menuEndTime,callback:function(t){e.menuEndTime=t},expression:"menuEndTime"}},[e.menuEndTime?n("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(t){return e.$refs.menuEndTime.save(e.endTimeInDay)}},model:{value:e.endTimeInDay,callback:function(t){e.endTimeInDay=t},expression:"endTimeInDay"}}):e._e()],1)],1)],1),n("v-checkbox",{attrs:{label:"竞赛是否可见"},model:{value:e.editedItem.access,callback:function(t){e.$set(e.editedItem,"access",t)},expression:"editedItem.access"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.closeEditItem}},[e._v("取消")]),n("v-btn",{attrs:{color:"primary",text:"",loading:e.editingLoader,disabled:e.editingLoader},on:{click:e.submiteditItem}},[e._v("确定")]),n("v-spacer")],1)],1)],1)],1)],1)],1)],1)},a=[],s=(n("ac1f"),n("1276"),n("498a"),n("a4d3"),n("e01a"),n("841c"),n("d81d"),n("d6bd")),o=n("4ec3"),r=n("4c05"),l={components:{SnackBar:r["a"],DeleteDialog:s["a"]},mounted:function(){this.getDataFromApi("")},watch:{options:{handler:function(){this.getDataFromApi("")},deep:!0}},computed:{editTitle:function(){return this.editing?"编辑一个竞赛":"添加一个竞赛"}},methods:{deleteItem:function(e){this.deleteContestId=e.id,this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;o["a"].contestFactory.deleteContest(this.deleteContestId).then((function(t){var n={0:"删除成功","-1":"竞赛不存在"};e.closeDelete(),e.getDataFromApi(""),e.$refs.sb.warn(n[t.code])}))},closeDelete:function(){this.dialogDelete=!1,this.deleteContestId=null},addContest:function(){this.editedItem=Object.assign({},this.defaultItem),this.editing=!1,this.editingDialog=!0},editItem:function(e){this.editedIndex=this.tableData.indexOf(e);var t=e.startTime.trim().split(" "),n=e.endTime.trim().split(" ");this.startDay=t[0],this.startTimeInDay=t[1],this.endDay=n[0],this.endTimeInDay=n[1],this.editedItem=Object.assign({},e),this.editingDialog=!0},closeEditItem:function(){this.startDay=null,this.endDay=null,this.startTimeInDay=null,this.endTimeInDay=null,this.editing=!0,this.editedIndex=-1,this.editedItem=Object.assign({},this.defaultItem),this.editingDialog=!1,this.$refs.form.resetValidation()},submiteditItem:function(){var e=this,t=new Date(this.startDay+" "+this.startTimeInDay),n=t.getTime(),i=new Date(this.endDay+" "+this.endTimeInDay),a=i.getTime();this.editedItem.startTime=n,this.editedItem.endTime=a,this.editingLoader=!0,this.editing?o["a"].contestFactory.changeContestBasicInfo(this.editedItem.id,this.editedItem.title,this.editedItem.description,this.editedItem.startTime,this.editedItem.endTime,this.editedItem.access).then((function(t){var n={0:"修改成功","-1":"失败"};e.editingLoader=!1,e.closeEditItem(),e.getDataFromApi(""),e.$refs.sb.warn(n[t.code])})):o["a"].contestFactory.addContest(this.editedItem.id,this.editedItem.title,this.editedItem.description,this.editedItem.startTime,this.editedItem.endTime,this.editedItem.access).then((function(t){var n={0:"添加成功","-1":"失败"};e.editingLoader=!1,e.closeEditItem(),e.getDataFromApi(""),e.$refs.sb.warn(n[t.code])}))},searchId:function(){this.getDataFromApi(this.search)},getDataFromApi:function(e){var t=this,n=this.options,i=n.page,a=n.itemsPerPage;this.loading=!0,o["a"].contestFactory.getMYContestAdministrator(i,a,e).then((function(e){e.content.list;var n=t;n.tableData=e.content.list,n.tableData.map((function(e){var t=n.timestampToTime(e.startTime),i=n.timestampToTime(e.endTime);e.startTime=t[0]+t[1],e.endTime=i[0]+i[1]})),n.totalContest=e.content.totalAmount,n.loading=!1}))}},data:function(){var e=this;return{items:[{text:"我管理的竞赛",disabled:!1}],timestampToTime:function(e){var t=new Date(parseInt(e)),n=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",a=t.getDate()+" ",s=t.getHours()+":",o=t.getMinutes();return parseInt(o)<10&&(o="0"+o),[n+i+a,s+o]},allowedDates:function(e){return new Date(e).getTime()-new Date(Date.now()).getTime()>0},allowedEndDates:function(t){return new Date(t).getTime()-new Date(e.startDay).getTime()>0},date:null,deleteContestId:null,dialogDelete:!1,startDay:null,endDay:null,startTimeInDay:null,endTimeInDay:null,menuEndTime:!1,menuEndDay:!1,menuTime:!1,menu:!1,editValid:!1,editing:!0,editingDialog:!1,editingLoader:!1,defaultItem:{id:"",title:"",startTime:"",endTime:"",description:"",access:!1},editedItem:{id:"",title:"",startTime:"",endTime:"",description:"",access:!1},editedIndex:-1,search:"",loading:!1,totalContest:0,tableData:[],options:{},headers:[{text:"竞赛ID",align:"start",sortable:!1,value:"id"},{text:"标题",value:"title",sortable:!1},{text:"开始时间",value:"startTime",sortable:!1},{text:"结束时间",value:"endTime",sortable:!1},{text:"修改",value:"revise",sortable:!1},{text:"删除",value:"delete",sortable:!1},{text:"是否可见",value:"access",sortable:!1},{text:"进入",value:"enter",sortable:!1}]}}},d=l,c=n("2877"),u=n("6544"),m=n.n(u),f=n("8336"),v=n("b0af"),p=n("99d9"),D=n("ac7c"),h=n("62ad"),y=n("a523"),g=n("8fea"),I=n("2e4b"),b=n("169a"),T=n("4bd4"),x=n("132d"),k=n("e449"),w=n("0fd9"),C=n("2fa4"),_=n("8654"),V=n("c964"),E=Object(c["a"])(d,i,a,!1,null,null,null);t["default"]=E.exports;m()(E,{VBtn:f["a"],VCard:v["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCheckbox:D["a"],VCol:h["a"],VContainer:y["a"],VDataTable:g["a"],VDatePicker:I["a"],VDialog:b["a"],VForm:T["a"],VIcon:x["a"],VMenu:k["a"],VRow:w["a"],VSpacer:C["a"],VTextField:_["a"],VTimePicker:V["a"]})}}]);
//# sourceMappingURL=chunk-2d0b33ff.51e3c09d.js.map