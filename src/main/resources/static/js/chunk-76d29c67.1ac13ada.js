(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76d29c67"],{"0de5":function(t,e,i){"use strict";i("a9e3"),i("d81d"),i("fb6a"),i("96a9");var a=i("24b2"),n=i("f977"),s=i("80d2");e["a"]=a["a"].extend({name:"v-virtual-scroll",directives:{Scroll:n["b"]},props:{bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:function(){return[]}}},data:function(){return{first:0,last:0,scrollTop:0}},computed:{__bench:function(){return parseInt(this.bench,10)},__itemHeight:function(){return parseInt(this.itemHeight,10)},firstToRender:function(){return Math.max(0,this.first-this.__bench)},lastToRender:function(){return Math.min(this.items.length,this.last+this.__bench)}},watch:{height:"onScroll",itemHeight:"onScroll"},mounted:function(){this.last=this.getLast(0)},methods:{getChildren:function(){return this.items.slice(this.firstToRender,this.lastToRender).map(this.genChild)},genChild:function(t,e){e+=this.firstToRender;var i=Object(s["g"])(e*this.__itemHeight);return this.$createElement("div",{staticClass:"v-virtual-scroll__item",style:{top:i},key:e},Object(s["s"])(this,"default",{index:e,item:t}))},getFirst:function(){return Math.floor(this.scrollTop/this.__itemHeight)},getLast:function(t){var e=parseInt(this.height||0,10)||this.$el.clientHeight;return t+Math.ceil(e/this.__itemHeight)},onScroll:function(){this.scrollTop=this.$el.scrollTop,this.first=this.getFirst(),this.last=this.getLast(this.first)}},render:function(t){var e=t("div",{staticClass:"v-virtual-scroll__container",style:{height:Object(s["g"])(this.items.length*this.__itemHeight)}},this.getChildren());return t("div",{staticClass:"v-virtual-scroll",style:this.measurableStyles,directives:[{name:"scroll",modifiers:{self:!0},value:this.onScroll}],on:this.$listeners},[e])}})},"23a7":function(t,e,i){"use strict";var a=i("2909"),n=i("5530"),s=i("53ca"),o=(i("a9e3"),i("caad"),i("d81d"),i("b0c0"),i("99af"),i("a434"),i("159b"),i("fb6a"),i("5803"),i("2677")),r=i("cc20"),l=i("80d2"),d=i("d9bd"),c=i("d9f7");e["a"]=o["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(t){return"boolean"===typeof t||[1e3,1024].includes(t)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(t){return Object(l["H"])(t).every((function(t){return null!=t&&"object"===Object(s["a"])(t)}))}}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);var e=this.internalArrayValue.reduce((function(t,e){var i=e.size,a=void 0===i?0:i;return t+a}),0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(l["w"])(e,1024===this.base))},internalArrayValue:function(){return Object(l["H"])(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},text:function(){var t=this;return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((function(e){var i=e.name,a=void 0===i?"":i,n=e.size,s=void 0===n?0:n,o=t.truncateText(a);return t.showSize?"".concat(o," (").concat(Object(l["w"])(s,1024===t.base),")"):o})):[this.placeholder]},base:function(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(t){!0===t&&Object(d["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(t){var e=this.multiple?t:t?[t]:[];Object(l["j"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips:function(){var t=this;return this.isDirty?this.text.map((function(e,i){return t.$createElement(r["a"],{props:{small:t.smallChips},on:{"click:close":function(){var e=t.internalValue;e.splice(i,1),t.internalValue=e}}},[e])})):[]},genControl:function(){var t=o["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(c["d"])(t.data.style,{display:"none"})),t},genInput:function(){var t=o["a"].options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot:function(){var t=this;if(!this.prependIcon)return null;var e=this.genIcon("prepend",(function(){t.$refs.input.click()}));return this.genSlot("prepend","outer",[e])},genSelectionText:function(){var t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections:function(){var t=this,e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(i,a){t.$scopedSlots.selection&&e.push(t.$scopedSlots.selection({text:t.text[a],file:i,index:a}))})):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot:function(){var t=this,e=o["a"].options.methods.genTextFieldSlot.call(this);return e.data.on=Object(n["a"])(Object(n["a"])({},e.data.on||{}),{},{click:function(){return t.$refs.input.click()}}),e},onInput:function(t){var e=Object(a["a"])(t.target.files||[]);this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown:function(t){this.$emit("keydown",t)},truncateText:function(t){if(t.length<Number(this.truncateLength))return t;var e=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(t.slice(0,e),"…").concat(t.slice(t.length-e))}}})},2677:function(t,e,i){"use strict";var a=i("8654");e["a"]=a["a"]},"2bc5":function(t,e,i){"use strict";var a=i("5530"),n=(i("a15b"),i("abd3"),i("ade3")),s=i("1c87"),o=i("58df"),r=Object(o["a"])(s["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes:function(){return Object(n["a"])({"v-breadcrumbs__item":!0},this.activeClass,this.disabled)}},render:function(t){var e=this.generateRouteLink(),i=e.tag,n=e.data;return t("li",[t(i,Object(a["a"])(Object(a["a"])({},n),{},{attrs:Object(a["a"])(Object(a["a"])({},n.attrs),{},{"aria-current":this.isActive&&this.isLink?"page":void 0})}),this.$slots.default)])}}),l=i("80d2"),d=Object(l["i"])("v-breadcrumbs__divider","li"),c=i("7560");e["a"]=Object(o["a"])(c["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},large:Boolean},computed:{classes:function(){return Object(a["a"])({"v-breadcrumbs--large":this.large},this.themeClasses)}},methods:{genDivider:function(){return this.$createElement(d,this.$slots.divider?this.$slots.divider:this.divider)},genItems:function(){for(var t=[],e=!!this.$scopedSlots.item,i=[],a=0;a<this.items.length;a++){var n=this.items[a];i.push(n.text),e?t.push(this.$scopedSlots.item({item:n})):t.push(this.$createElement(r,{key:i.join("."),props:n},[n.text])),a<this.items.length-1&&t.push(this.genDivider())}return t}},render:function(t){var e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}})},5803:function(t,e,i){},9680:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("SnackBar",{ref:"sb"}),i("div",{staticClass:"tw-bg-white tw-shadow-md"},[i("v-breadcrumbs",{attrs:{items:t.items}})],1),i("v-container",{attrs:{"grid-list-xs":"",fluid:""}},[i("v-row",[i("v-col",[i("groupConfig",{attrs:{groupId:this.$route.params.groupId},on:{editName:t.showeditName}})],1)],1),i("v-row",[i("v-col",[i("groupMember",{attrs:{groupId:this.$route.params.groupId},on:{showmsg:t.showGroupMemberMsg}})],1)],1),i("v-row",[i("v-col",[i("groupAssistantManagement",{attrs:{groupId:this.$route.params.groupId},on:{deleteAssitant:t.showDeleteAssistant,addAssitant:t.showAddAssistant}})],1)],1),i("v-row",[i("v-col",[i("contest-of-group",{attrs:{groupId:this.$route.params.groupId},on:{showmsg:t.showContestMsg}}),t._v("> ")],1)],1)],1)],1)},n=[],s=i("4c05"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("div",{staticClass:"tw-flex tw-justify-between tw-w-full pa-5 tw-items-center"},[i("div",{staticClass:"tw-text-xl tw-font-bold"},[t._v("班级学助管理")]),i("div",[t.checkTeacher?i("v-btn",{attrs:{color:"primary",dark:""},on:{click:function(e){t.addAssistantDialog=!0}}},[t._v(" 添加新学助 ")]):t._e()],1)]),i("v-data-table",{staticClass:"elevation-2 tw-pb-8",attrs:{headers:t.headerToShow,items:t.groupAssistant,options:t.options,"server-items-length":t.totalGroupAssistant,loading:t.loading,"hide-default-footer":!0,"footer-props":{showFirstLastPage:!0,itemsPerPageOptions:[5,10,15]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),i("DeleteDialog",{attrs:{title:"删除组内学助",content:"确定删除吗",width:"35rem"},on:{cancel:t.closeDelete,confirm:t.deleteItemConfirm},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}}),i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.addAssistantDialog,callback:function(e){t.addAssistantDialog=e},expression:"addAssistantDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-col",[i("v-card-title",{staticClass:"text-h5"},[t._v("添加一个学助")]),i("v-card-text",[i("v-form",{ref:"editingForm",model:{value:t.addValid,callback:function(e){t.addValid=e},expression:"addValid"}},[i("v-text-field",{attrs:{rules:[function(t){return!!t||"ID不能为空"}],label:"请输入学助ID",required:""},model:{value:t.assistantId,callback:function(e){t.assistantId=e},expression:"assistantId"}})],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeAddingAssistant}},[t._v("取消")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.addAssistantLoader,disabled:t.addAssistantLoader||!t.addValid},on:{click:t.submit}},[t._v("确定")]),i("v-spacer")],1)],1)],1)],1)],1)],1)},r=[],l=i("d6bd"),d=i("4ec3"),c={components:{DeleteDialog:l["a"]},data:function(){return{myrole:null,groupId:null,addValid:!1,assistantId:null,addAssistantLoader:!1,addAssistantDialog:!1,assitantId:null,defaultItem:{id:"",name:"",mail:""},editedItem:{id:"",name:"",mail:""},editedIndex:-1,dialogDelete:!1,options:{},loading:!1,totalGroupAssistant:0,groupAssistant:[],groupAssistantHeaders:[{text:"学助id",align:"start",sortable:!1,value:"id"},{text:"学助名",value:"name"},{text:"学助邮箱",value:"mail"},{text:"删除学助",value:"actions",sortable:!1}],headerForAssistant:[{text:"学助id",align:"start",sortable:!1,value:"id"},{text:"学助名",value:"name"},{text:"学助邮箱",value:"mail"}]}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){this.groupId=this.$route.params.groupId,this.getDataFromApi(),this.getMyRole()},computed:{checkTeacher:function(){return"teacher"==this.myrole},headerToShow:function(){return"teacher"==this.myrole?this.groupAssistantHeaders:this.headerForAssistant}},methods:{getMyRole:function(){var t=this;d["a"].authFactory.getRole().then((function(e){t.myrole=e.content}))},closeAddingAssistant:function(){this.assistantId=null,this.$refs.editingForm.resetValidation(),this.addAssistantDialog=!1,this.getDataFromApi()},submit:function(){var t=this;this.addAssistantLoader=!0,d["a"].groupFactory.addAssistantInGroup(this.groupId,this.assistantId).then((function(e){var i={0:"成功","-1":"组不存在","-2":"学助已在本组","-3":"用户不存在","-4":"不能添加老师","-5":"不能添加本组学生"};t.$emit("addAssitant",i[e.code]),t.addAssistantLoader=!1,t.closeAddingAssistant()}))},deleteItemConfirm:function(){var t=this;d["a"].groupFactory.deleteAssistantInGroup(this.groupId,this.editedItem.id).then((function(e){console.log(t.editedItem);var i={0:"成功","-1":"组不存在","-2":"学助不存在"};t.$emit("deleteAssitant",i[e.code]),t.closeDelete()}))},closeDelete:function(){var t=this;this.getDataFromApi(),this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},deleteItem:function(t){this.editedIndex=this.groupAssistant.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},getDataFromApi:function(){var t=this;this.loading=!0,d["a"].groupFactory.getAssistantInGroup(this.groupId).then((function(e){t.groupAssistant=e.content.list,t.totalGroupAssistant=e.content.totalAmount,t.loading=!1}))}}},u=c,m=i("2877"),h=i("6544"),v=i.n(h),f=i("8336"),p=i("b0af"),g=i("99d9"),b=i("62ad"),D=i("8fea"),y=i("169a"),x=i("4bd4"),I=i("132d"),w=i("0fd9"),C=i("2fa4"),k=i("8654"),_=Object(m["a"])(u,o,r,!1,null,null,null),T=_.exports;v()(_,{VBtn:f["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:b["a"],VDataTable:D["a"],VDialog:y["a"],VForm:x["a"],VIcon:I["a"],VRow:w["a"],VSpacer:C["a"],VTextField:k["a"]});var V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"tw-pb-8"},[i("div",{staticClass:"tw-flex tw-justify-between tw-items-center pa-5"},[i("div",{staticClass:"tw-text-xl tw-font-bold"},[t._v("组详情")]),i("div",[t.checkTeacher?i("v-btn",{staticClass:"mx-1",attrs:{color:"primary"},on:{click:t.releaseAnnouncement}},[t._v("发布公告")]):t._e(),t.checkTeacher?i("v-btn",{staticClass:"mx-1",attrs:{color:"primary"},on:{click:t.editGroupName}},[t._v("修改组名")]):t._e(),t.checkTeacher?i("v-btn",{staticClass:"mx-1",attrs:{color:"error"},on:{click:t.deleteGroup}},[t._v("删除本组")]):t._e()],1)]),i("v-container",{staticClass:"tw-px-8",attrs:{fluid:""}},[i("v-row",[i("div",{staticClass:"tw-flex tw-flex-row tw-p-3"},[i("div",{staticClass:"tw-w-32"},[t._v("组id：")]),i("div",{staticClass:"tw-w-48"},[t._v(t._s(t.groupId))])])]),i("v-row",[i("div",{staticClass:"tw-flex tw-flex-row tw-p-3"},[i("div",{staticClass:"tw-w-32"},[t._v("组名：")]),i("div",{staticClass:"tw-w-48"},[t._v(t._s(t.name))])])]),i("v-row",[i("div",{staticClass:"tw-flex tw-flex-row tw-p-3"},[i("div",{staticClass:"tw-w-32"},[t._v("学生人数：")]),i("div",{staticClass:"tw-w-48"},[t._v(t._s(t.memberNum))])])]),i("v-row",[i("div",{staticClass:"tw-flex tw-flex-row tw-p-3"},[i("div",{staticClass:"tw-w-32"},[t._v("学助人数：")]),i("div",{staticClass:"tw-w-48"},[t._v(t._s(t.assistantNum))])])])],1),i("DeleteDialog",{attrs:{title:"删除用户组",content:"确定删除吗，确认删除操作后将离开本界面，跳转至所有群组界面",width:"35rem"},on:{cancel:t.closeDelete,confirm:t.deleteItemConfirm},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}}),i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.editingDialog,callback:function(e){t.editingDialog=e},expression:"editingDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-col",[i("v-card-title",{staticClass:"text-h5"},[t._v("修改组名")]),i("v-card-text",[i("v-form",{ref:"addingForm",model:{value:t.addValid,callback:function(e){t.addValid=e},expression:"addValid"}},[i("v-text-field",{attrs:{rules:[function(t){return!!t||"ID不能为空"}],label:"请输入新的组名",required:""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeEditingDialog}},[t._v("取消")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.editingLoader,disabled:t.editingLoader||!t.addValid},on:{click:t.submitEditingDialog}},[t._v("确定")]),i("v-spacer")],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"800px","max-height":"600px"},model:{value:t.releaseDialog,callback:function(e){t.releaseDialog=e},expression:"releaseDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-col",[i("v-card-title",{staticClass:"text-h5"},[t._v("发布公告")]),i("v-card-text",[i("v-form",{ref:"releaseForm",model:{value:t.releaseValid,callback:function(e){t.releaseValid=e},expression:"releaseValid"}},[i("v-text-field",{attrs:{rules:[function(t){return!!t||"公告名不能为空"},function(t){return t.length<10||"公告名不能超过10个字符"}],label:"请输入公告名",required:""},model:{value:t.releaseName,callback:function(e){t.releaseName=e},expression:"releaseName"}}),i("v-input",{attrs:{rules:[function(t){return!!t||"公告内容不能为空"},function(t){return t.length<500||"公告内容不能超过500个"}],count:500,required:""},model:{value:t.releaseContent,callback:function(e){t.releaseContent=e},expression:"releaseContent"}},[i("md-editor",{staticClass:"tw-w-full",model:{value:t.releaseContent,callback:function(e){t.releaseContent=e},expression:"releaseContent"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.cancelRelease()}}},[t._v("取消")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.releaseLoading,disabled:t.releaseLoading},on:{click:function(e){return t.confirmRelease()}}},[t._v("确定")]),i("v-spacer")],1)],1)],1)],1)],1)],1)},A=[],$=(i("b0c0"),i("af68")),F={props:["groupId"],components:{DeleteDialog:l["a"],MdEditor:$["a"]},data:function(){return{publicContent:[],releaseLoading:!1,releaseName:"",isMail:!1,releaseDialog:!1,releaseValid:!1,releaseContent:"",myrole:null,name:null,memberNum:null,assistantNum:null,addValid:!1,editingDialog:!1,dialogDelete:!1,newName:null,editingLoader:!1}},mounted:function(){this.getDataFromApi(),this.getMyRole()},computed:{checkTeacher:function(){return"teacher"==this.myrole}},methods:{releaseAnnouncement:function(){this.releaseDialog=!0},cancelRelease:function(){this.isMail=!1,this.releaseName="",this.releaseContent="",this.$refs.releaseForm.resetValidation(),this.releaseDialog=!1},confirmRelease:function(){var t=this,e={0:"成功","-1":"失败"};this.$refs.releaseForm.validate()&&(this.releaseLoading=!0,d["a"].forumFactory.addForum(this.groupId,this.releaseName,this.releaseContent,!0,this.isMail).then((function(i){t.$emit("editName",e[i.code]),t.releaseLoading=!1,t.cancelRelease()})).catch((function(){t.$emit("editName","未知错误"),t.releaseLoading=!1,t.cancelRelease()})))},getMyRole:function(){var t=this;d["a"].authFactory.getRole().then((function(e){t.myrole=e.content}))},getDataFromApi:function(){var t=this;d["a"].groupFactory.getDataInGroup(this.groupId).then((function(e){t.name=e.content.groupName,t.memberNum=e.content.memberNum,t.assistantNum=e.content.assistantNum}))},closeEditingDialog:function(){this.editingDialog=!1,this.newName=null,this.$refs.addingForm.resetValidation(),this.getDataFromApi()},submitEditingDialog:function(){var t=this;d["a"].groupFactory.editGroupName(this.newName,this.groupId).then((function(e){var i={0:"成功","-1":"组已存在","-2":"组为空","-3":"组名重复"};t.$emit("editName",i[e.code]),t.editingLoader=!1,t.closeEditingDialog()}))},editGroupName:function(){this.editingDialog=!0},deleteItemConfirm:function(){var t=this;d["a"].groupFactory.deleteGroup(this.groupId).then((function(e){t.closeDelete(),0==e.code?t.$router.push({name:"GroupManagement"}):t.$emit("editName",e.msg)}))},deleteGroup:function(){this.dialogDelete=!0},closeDelete:function(){this.dialogDelete=!1}}},S=F,j=i("a523"),L=i("b675"),O=Object(m["a"])(S,V,A,!1,null,null,null),E=O.exports;v()(O,{VBtn:f["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:b["a"],VContainer:j["a"],VDialog:y["a"],VForm:x["a"],VInput:L["a"],VRow:w["a"],VSpacer:C["a"],VTextField:k["a"]});var M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("div",{staticClass:"tw-flex tw-justify-between pa-5 tw-w-full"},[i("div",{staticClass:"tw-text-xl tw-font-bold"},[t._v("班级用户管理")]),i("div",[t.checkTeacher?i("v-btn",{staticClass:"mx-1",attrs:{color:"primary",dark:""},on:{click:function(e){t.addingDialog=!0}}},[t._v(" 添加学生到组 ")]):t._e(),t.checkTeacher?i("v-btn",{staticClass:"mx-1",attrs:{color:"primary",dark:""},on:{click:function(e){t.addingManyDialog=!0}}},[t._v(" 批量添加到组 ")]):t._e()],1)]),i("v-data-table",{staticClass:"elevation-2",attrs:{headers:t.headerToShow,items:t.allUser,options:t.options,"server-items-length":t.totalUser,loading:t.loading,"footer-props":{showFirstLastPage:!0,itemsPerPageOptions:[5,10,15]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.edit",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")])]}},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.editingDialog,callback:function(e){t.editingDialog=e},expression:"editingDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-col",[i("v-card-title",{staticClass:"text-h5"},[t._v("修改一个用户")]),i("v-card-text",[i("v-form",{ref:"editingForm",model:{value:t.editValid,callback:function(e){t.editValid=e},expression:"editValid"}},[i("v-text-field",{attrs:{rules:[function(t){return!!t||"ID不能为空"}],label:"ID",required:""},model:{value:t.editedItem.id,callback:function(e){t.$set(t.editedItem,"id",e)},expression:"editedItem.id"}}),i("v-text-field",{attrs:{rules:[function(t){return!!t||"用户名不能为空"}],label:"用户名",required:""},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}}),i("v-text-field",{attrs:{rules:[function(t){return!!t||"邮箱不能为空"},function(t){return/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(t)||"邮箱格式错误"}],label:"邮箱",required:""},model:{value:t.editedItem.mail,callback:function(e){t.$set(t.editedItem,"mail",e)},expression:"editedItem.mail"}})],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeEditUser}},[t._v("取消")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.editingUserLoader,disabled:t.editingUserLoader||!t.editValid},on:{click:t.submitEditUser}},[t._v("确定")]),i("v-spacer")],1)],1)],1)],1)],1),i("DeleteDialog",{attrs:{title:"删除组内用户",content:"确定删除吗",width:"35rem"},on:{cancel:t.closeDelete,confirm:t.deleteItemConfirm},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}}),i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.addingDialog,callback:function(e){t.addingDialog=e},expression:"addingDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-col",[i("v-card-title",{staticClass:"text-h5"},[t._v("添加一个用户")]),i("v-card-text",[i("v-form",{ref:"addingForm",model:{value:t.addValid,callback:function(e){t.addValid=e},expression:"addValid"}},[i("v-text-field",{attrs:{rules:[function(t){return!!t||"ID不能为空"}],label:"请输入用户ID",required:""},model:{value:t.addUserId,callback:function(e){t.addUserId=e},expression:"addUserId"}})],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeAddingDialog}},[t._v("取消")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.addUserLoader,disabled:t.addUserLoader||!t.addValid},on:{click:t.submitAddingDialog}},[t._v("确定")]),i("v-spacer")],1)],1)],1)],1)],1),i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.addingManyDialog,callback:function(e){t.addingManyDialog=e},expression:"addingManyDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-card-title",{staticClass:"text-h5"},[t._v("批量添加")])],1),i("v-row",[i("v-virtual-scroll",{staticClass:"tw-bg-gray-300",attrs:{bench:t.benched,items:t.responseData,height:"400","item-height":"50",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.index,n=e.item;return[i("v-list-item",{key:a,class:a%2==0?" tw-bg-gray-200":"tw-bg-gray-50"},[i("div",{staticClass:"tw-flex"},[i("div",{staticClass:"tw-w-32"},[t._v(t._s(n.userId))]),i("div",{staticClass:"tw-px-1 tw-rounded-md",class:t.classMap[n.status]},[t._v(" "+t._s(t.respMap[n.status])+" ")])])])]}}])})],1),i("v-row",[i("v-card-text",[i("v-form",{ref:"formCsv",model:{value:t.csvValid,callback:function(e){t.csvValid=e},expression:"csvValid"}},[i("v-file-input",{attrs:{"truncate-length":"15",dense:"",accept:".csv",rules:[function(t){return!!t||"文件不能为空"}]},model:{value:t.csvFile,callback:function(e){t.csvFile=e},expression:"csvFile"}})],1)],1)],1),i("v-row",[i("v-col",[i("v-card-actions",[i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeUpload}},[t._v("返回")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.addingManyLoader,disabled:t.addingManyLoader||!t.csvValid},on:{click:t.sendFile}},[t._v("上传")]),i("v-spacer")],1)],1)],1)],1)],1)],1)},U=[],N={computed:{checkTeacher:function(){return"teacher"==this.myrole},headerToShow:function(){return"teacher"==this.myrole?this.userHeaders:this.headerForAssistant}},components:{DeleteDialog:l["a"]},data:function(){return{myrole:null,respMap:{0:"成功","-1":"组不存在","-2":"用户不存在","-3":"用户已在组内","-4":"不能添加老师","-5":"不能添加本组学助"},classMap:{0:"tw-bg-green-400","-1":"tw-bg-yellow-500","-2":"tw-bg-red-400","-3":"tw-bg-red-400","-4":"tw-bg-red-400","-5":"tw-bg-red-400"},csvValid:!1,editValid:!1,addValid:!1,groupId:null,addingDialog:!1,addUserId:null,addUserLoader:!1,addingManyDialog:!1,benched:0,responseData:[],csvFile:null,addingManyLoader:!1,dialogDelete:!1,editingUserLoader:!1,editedIndex:null,editedItem:{id:null,name:null,mail:null},defaultItem:{id:null,name:null,mail:null},editingDialog:null,totalUser:null,loading:!1,options:{},allUser:[],choosen:0,userHeaders:[{text:"用户id",align:"start",sortable:!1,value:"id"},{text:"用户名",value:"name",sortable:!1},{text:"用户邮箱",value:"mail",sortable:!1},{text:"编辑用户",value:"edit",sortable:!1},{text:"删除用户",value:"actions",sortable:!1}],headerForAssistant:[{text:"用户id",align:"start",sortable:!1,value:"id"},{text:"用户名",value:"name",sortable:!1},{text:"用户邮箱",value:"mail",sortable:!1}]}},created:function(){},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},mounted:function(){this.groupId=this.$route.params.groupId,this.getDataFromApi(),this.getMyRole()},methods:{getMyRole:function(){var t=this;d["a"].authFactory.getRole().then((function(e){t.myrole=e.content}))},sendFile:function(){var t=this;d["a"].groupFactory.addManyUserInGroup(this.groupId,this.csvFile).then((function(e){t.responseData=e.content,t.$emit("showmsg","上传成功"),t.$refs.formCsv.resetValidation(),t.csvFile=null,t.getDataFromApi()}))},closeUpload:function(){this.responseData=[],this.responseData=[],this.addingManyDialog=!1},closeAddingDialog:function(){this.addUserId=null,this.$refs.addingForm.resetValidation(),this.addingDialog=!1,this.getDataFromApi()},submitAddingDialog:function(){var t=this;this.addUserLoader=!0,d["a"].groupFactory.addUserInGroup(this.groupId,this.addUserId).then((function(e){t.addUserLoader=!1;var i={0:"成功","-1":"组不存在","-2":"用户不存在","-3":"用户已在组内","-4":"不能添加老师","-5":"不能添加本组学助"};t.$emit("showmsg",i[e.code]),t.closeAddingDialog()}))},deleteItemConfirm:function(){var t=this;d["a"].groupFactory.deleteUserInGroup(this.groupId,this.editedItem.id).then((function(e){var i={0:"成功","-1":"组不存在","-2":"用户不在该组","-3":"用户不存在"};t.$emit("showmsg",i[e.code]),t.closeDelete()}))},deleteItem:function(t){this.editedIndex=this.allUser.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},closeDelete:function(){var t=this;this.dialogDelete=!1,this.getDataFromApi(),this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeEditUser:function(){this.editedItem=Object.assign({},this.defaultItem),this.$refs.editingForm.resetValidation(),this.editingDialog=!1,this.getDataFromApi()},submitEditUser:function(){var t=this;this.editingUserLoader=!0;var e=0,i=this;i.editingUser=!0,d["a"].userFactory.changeUserInfo(i.editedItem.id,i.editedItem.name,"123456",i.editedItem.mail).then((function(i){0==i.code?t.$emit("showmsg","修改成功"):(t.$emit("showmsg","非法信息"),e=1),t.editingUserLoader=!1})),i.editingUser=!1,0==e&&i.closeEditUser()},editItem:function(t){this.editedIndex=this.allUser.indexOf(t),this.editedItem=Object.assign({},t),this.editingDialog=!0},getDataFromApi:function(){var t=this,e=this.options,i=e.page,a=e.itemsPerPage;this.loading=!0,d["a"].groupFactory.getUserInGroup(this.groupId,i,a,"").then((function(e){t.allUser=e.content.list,t.totalUser=e.content.totalAmount,t.loading=!1}))}}},R=N,G=i("23a7"),z=i("da13"),P=i("0de5"),q=Object(m["a"])(R,M,U,!1,null,null,null),B=q.exports;v()(q,{VBtn:f["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:b["a"],VDataTable:D["a"],VDialog:y["a"],VFileInput:G["a"],VForm:x["a"],VIcon:I["a"],VListItem:z["a"],VRow:w["a"],VSpacer:C["a"],VTextField:k["a"],VVirtualScroll:P["a"]});var H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("DeleteDialog",{attrs:{title:"删除一个组内竞赛",content:"确定删除吗",width:"35rem"},on:{cancel:t.closeDelete,confirm:t.deleteItemConfirm},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}}),i("v-card",[i("div",{staticClass:"tw-flex tw-justify-between tw-items-center pa-5"},[i("div",{staticClass:"tw-font-bold tw-text-xl"},[t._v("班级竞赛管理")]),i("div",[i("div",{staticClass:"tw-inline-block mx-1"},[i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"竞赛标题","single-line":"","hide-details":""},on:{"click:append":t.searchId},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-btn",{attrs:{color:"primary mx-1"},on:{click:t.addContest}},[t._v("添加竞赛")])],1)]),i("v-data-table",{staticClass:"elevation-2",attrs:{headers:t.headers,items:t.tableData,options:t.options,"footer-props":{showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",prevIcon:"mdi-minus",nextIcon:"mdi-plus",itemsPerPageOptions:[5,10,15]},"server-items-length":t.totalContest,loading:t.loading},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.delete",fn:function(e){var a=e.item;return[i("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"item.revise",fn:function(e){var a=e.item;return[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")])]}},{key:"item.enter",fn:function(e){var a=e.item;return[i("v-btn",{attrs:{text:"",color:"primary",to:{name:"contestInfo",params:{contestId:a.contestId}}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-door-open")]),t._v(" 进入竞赛 ")],1)]}}],null,!0)})],1),i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.editingDialog,callback:function(e){t.editingDialog=e},expression:"editingDialog"}},[i("v-card",{staticClass:"pa-5"},[i("v-row",[i("v-col",[i("v-card-title",{staticClass:"text-h5"},[t._v(t._s(t.editTitle))]),i("v-card-text",[i("v-form",{ref:"form",model:{value:t.editValid,callback:function(e){t.editValid=e},expression:"editValid"}},[i("v-text-field",{attrs:{rules:[function(t){return!!t||"标题不能为空"},function(t){return t.length<=10||"输入必须小于10个字符"}],label:"竞赛标题",counter:10,required:""},model:{value:t.editedItem.title,callback:function(e){t.$set(t.editedItem,"title",e)},expression:"editedItem.title"}}),i("v-text-field",{attrs:{rules:[function(t){return t.length<=10||"输入必须小于20个字符"}],label:"竞赛描述",counter:20,required:""},model:{value:t.editedItem.description,callback:function(e){t.$set(t.editedItem,"description",e)},expression:"editedItem.description"}}),i("v-row",[i("v-col",[i("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.startDay,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.startDay=e},"update:return-value":function(e){t.startDay=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"比赛开始日期","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:[function(t){return!!t||"选择日期"}]},model:{value:t.startDay,callback:function(e){t.startDay=e},expression:"startDay"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"green lighten-1","allowed-dates":t.allowedDates},model:{value:t.startDay,callback:function(e){t.startDay=e},expression:"startDay"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.startDay)}}},[t._v(" OK ")])],1)],1)],1),i("v-col",[i("v-menu",{ref:"menuTime",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.startTimeInDay,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.startTimeInDay=e},"update:return-value":function(e){t.startTimeInDay=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"设置开始日期时间","prepend-icon":"mdi-clock-time-four-outline",readonly:"",required:"",rules:[function(t){return!!t||"选择时间"}]},model:{value:t.startTimeInDay,callback:function(e){t.startTimeInDay=e},expression:"startTimeInDay"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menuTime,callback:function(e){t.menuTime=e},expression:"menuTime"}},[t.menuTime?i("v-time-picker",{attrs:{max:t.judgeTime?t.endTimeInDay:null,"full-width":""},on:{"click:minute":function(e){return t.$refs.menuTime.save(t.startTimeInDay)}},model:{value:t.startTimeInDay,callback:function(e){t.startTimeInDay=e},expression:"startTimeInDay"}}):t._e()],1)],1)],1),i("v-row",[i("v-col",[i("v-menu",{ref:"menuEndDay",attrs:{"close-on-content-click":!1,"return-value":t.endDay,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.endDay=e},"update:return-value":function(e){t.endDay=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"比赛结束日期","prepend-icon":"mdi-calendar",readonly:"",required:"",rules:[function(t){return!!t||"选择日期"}]},model:{value:t.endDay,callback:function(e){t.endDay=e},expression:"endDay"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menuEndDay,callback:function(e){t.menuEndDay=e},expression:"menuEndDay"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"green lighten-1","allowed-dates":t.allowedEndDates},model:{value:t.endDay,callback:function(e){t.endDay=e},expression:"endDay"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menuEndDay=!1}}},[t._v(" Cancel ")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menuEndDay.save(t.endDay)}}},[t._v(" OK ")])],1)],1)],1),i("v-col",[i("v-menu",{ref:"menuEndTime",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.endTimeInDay,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.endTimeInDay=e},"update:return-value":function(e){t.endTimeInDay=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-text-field",t._g(t._b({attrs:{label:"设置结束日期时间","prepend-icon":"mdi-clock-time-four-outline",readonly:"",required:"",rules:[function(t){return!!t||"选择时间"}]},model:{value:t.endTimeInDay,callback:function(e){t.endTimeInDay=e},expression:"endTimeInDay"}},"v-text-field",n,!1),a))]}}]),model:{value:t.menuEndTime,callback:function(e){t.menuEndTime=e},expression:"menuEndTime"}},[t.menuEndTime?i("v-time-picker",{attrs:{min:t.judgeTime?t.startTimeInDay:null,"full-width":""},on:{"click:minute":function(e){return t.$refs.menuEndTime.save(t.endTimeInDay)}},model:{value:t.endTimeInDay,callback:function(e){t.endTimeInDay=e},expression:"endTimeInDay"}}):t._e()],1)],1)],1),i("v-checkbox",{attrs:{label:"竞赛是否可见"},model:{value:t.editedItem.access,callback:function(e){t.$set(t.editedItem,"access",e)},expression:"editedItem.access"}})],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeEditItem}},[t._v("取消")]),i("v-btn",{attrs:{color:"primary",text:"",loading:t.editingLoader,disabled:t.editingLoader},on:{click:t.submiteditItem}},[t._v("确定")]),i("v-spacer")],1)],1)],1)],1)],1)],1)},K=[],Z=(i("ac1f"),i("1276"),i("498a"),i("a4d3"),i("e01a"),i("841c"),i("d81d"),{components:{DeleteDialog:l["a"]},props:["groupId"],data:function(){var t=this;return{judge:!1,startDay:null,endDay:null,startTimeInDay:null,endTimeInDay:null,menuEndTime:!1,menuEndDay:!1,menuTime:!1,menu:!1,editValid:!1,editing:!0,editingDialog:!1,editingLoader:!1,defaultItem:{contestId:"",title:"",startTime:"",endTime:"",description:"",access:!1},editedItem:{contestId:"",title:"",startTime:"",endTime:"",description:"",access:!1},editedIndex:-1,deleteContestId:null,dialogDelete:!1,deleteLoader:!1,allowedDates:function(e){return null==t.endDay||new Date(t.endDay).getTime()-new Date(e).getTime()>=0},allowedEndDates:function(e){return new Date(e).getTime()-new Date(t.startDay).getTime()>=0},loading:!1,search:null,tableData:[],totalContest:10,options:{},headers:[{text:"竞赛ID",align:"start",sortable:!1,value:"contestId"},{text:"标题",value:"title",sortable:!1},{text:"开始时间",value:"startTime",sortable:!1},{text:"结束时间",value:"endTime",sortable:!1},{text:"修改",value:"revise",sortable:!1},{text:"删除",value:"delete",sortable:!1},{text:"是否可见",value:"access",sortable:!1},{text:"进入",value:"enter",sortable:!1}],timestampToTime:function(t){var e=new Date(parseInt(t)),i=e.getFullYear()+"-",a=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",n=e.getDate(),s=e.getHours()+":",o=e.getMinutes();return parseInt(o)<10&&(o="0"+o),parseInt(n)<10&&(n="0"+n),n+=" ",[i+a+n,s+o]}}},computed:{editTitle:function(){return this.editing?"编辑一个竞赛":"创建一个竞赛"},judgeTime:function(){return null!=this.startDay&&null!=this.endDay&&(this.startDay==this.endDay&&this.startDay==this.endDay)},address:function(){var t=this.startDay,e=this.endDay;return{startDay:t,endDay:e}}},watch:{options:{handler:function(){this.getDataFromApi("")},deep:!0},address:{handler:function(){null!=this.startDay&&null!=this.endDay&&this.startDay==this.endDay&&this.judge&&(console.log("执行了"),console.log(this.editingDialog),this.startTimeInDay=null,this.endTimeInDay=null)},immediate:!0}},mounted:function(){this.getDataFromApi("")},methods:{addContest:function(){this.editedItem=Object.assign({},this.defaultItem),this.editing=!1,this.editingDialog=!0,this.judge=!0},editItem:function(t){this.editedIndex=this.tableData.indexOf(t);var e=t.startTime.trim().split(" "),i=t.endTime.trim().split(" ");this.startDay=e[0],this.startTimeInDay=e[1],this.endDay=i[0],this.endTimeInDay=i[1],this.editedItem=Object.assign({},t),this.editingDialog=!0,console.log(this.startTimeInDay)},closeEditItem:function(){this.startDay=null,this.endDay=null,this.startTimeInDay=null,this.endTimeInDay=null,this.editing=!0,this.editedIndex=-1,this.editedItem=Object.assign({},this.defaultItem),this.editingDialog=!1,this.judge=!1,this.$refs.form.resetValidation()},submiteditItem:function(){var t=this,e=new Date(this.startDay+" "+this.startTimeInDay),i=e.getTime(),a=new Date(this.endDay+" "+this.endTimeInDay),n=a.getTime();this.editedItem.startTime=i,this.editedItem.endTime=n,console.log(this.startTimeInDay),console.log(this.editedItem),this.$refs.form.validate()&&(this.editingLoader=!0,this.editing?d["a"].contestFactory.changeContestBasicInfo(this.editedItem.contestId,this.editedItem.title,this.editedItem.description,this.editedItem.startTime,this.editedItem.endTime,this.editedItem.access).then((function(e){var i={0:"修改成功","-1":"失败"};t.editingLoader=!1,t.closeEditItem(),t.getDataFromApi(""),t.$emit("showmsg",i[e.code])})):d["a"].contestFactory.addContest(this.groupId,this.editedItem.title,this.editedItem.description,this.editedItem.startTime,this.editedItem.endTime,this.editedItem.access).then((function(e){var i={0:"添加成功","-1":"失败"};t.editingLoader=!1,t.closeEditItem(),t.getDataFromApi(""),t.$emit("showmsg",i[e.code])})))},deleteItem:function(t){this.deleteContestId=t.contestId,this.dialogDelete=!0},deleteItemConfirm:function(){var t=this;this.deleteLoader=!0,d["a"].contestFactory.deleteContest(this.deleteContestId).then((function(e){var i={0:"删除成功","-1":"竞赛不存在"};t.closeDelete(),t.getDataFromApi(""),t.deleteLoader=!1,t.$emit("showmsg",i[e.code])}))},closeDelete:function(){this.dialogDelete=!1,this.deleteContestId=null},searchId:function(){this.getDataFromApi(this.search)},getDataFromApi:function(t){var e=this,i=this.options,a=i.page,n=i.itemsPerPage;this.loading=!0,d["a"].groupFactory.getContestInGroup(this.groupId,a,n,t).then((function(t){var i=e;i.tableData=t.content.list,i.tableData.map((function(t){var e=i.timestampToTime(t.startTime),a=i.timestampToTime(t.endTime);t.startTime=e[0]+e[1],t.endTime=a[0]+a[1]})),i.totalContest=t.content.totalAmount,e.loading=!1}))}}}),J=Z,Y=i("ac7c"),Q=i("2e4b"),W=i("e449"),X=i("c964"),tt=Object(m["a"])(J,H,K,!1,null,null,null),et=tt.exports;v()(tt,{VBtn:f["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCheckbox:Y["a"],VCol:b["a"],VDataTable:D["a"],VDatePicker:Q["a"],VDialog:y["a"],VForm:x["a"],VIcon:I["a"],VMenu:W["a"],VRow:w["a"],VSpacer:C["a"],VTextField:k["a"],VTimePicker:X["a"]});var it={components:{SnackBar:s["a"],groupAssistantManagement:T,groupConfig:E,groupMember:B,contestOfGroup:et},data:function(){return{items:[{text:"我管理的群组",disabled:!1,link:!0,exact:!0,to:{path:"../../admin/group"}},{text:"详细信息",disabled:!1}]}},created:function(){},watch:{},mounted:function(){},methods:{showGroupMemberMsg:function(t){this.$refs.sb.warn(t)},showeditName:function(t){this.$refs.sb.warn(t)},showAddAssistant:function(t){this.$refs.sb.warn(t)},showDeleteAssistant:function(t){this.$refs.sb.warn(t)},showContestMsg:function(t){this.$refs.sb.warn(t)}}},at=it,nt=i("2bc5"),st=Object(m["a"])(at,a,n,!1,null,null,null);e["default"]=st.exports;v()(st,{VBreadcrumbs:nt["a"],VCol:b["a"],VContainer:j["a"],VRow:w["a"]})},"96a9":function(t,e,i){},abd3:function(t,e,i){},af68:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" tw-border tw-border-solid tw-rounded-md"},[i("mavon-editor",{staticStyle:{"z-index":"0",border:"none"},attrs:{value:t.value,boxShadow:!1,subfield:!0,autofocus:!1,toolbars:t.toolbars},on:{input:t.em}})],1)},n=[],s={methods:{em:function(t){this.$emit("input",t)}},props:["value"],data:function(){return{toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!1,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}}},o=s,r=i("2877"),l=Object(r["a"])(o,a,n,!1,null,null,null);e["a"]=l.exports},f977:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("53ca");function n(t,e){var i=e.modifiers||{},n=i.self,s=void 0!==n&&n,o=e.value,r="object"===Object(a["a"])(o)&&o.options||{passive:!0},l="function"===typeof o||"handleEvent"in o?o:o.handler,d=s?t:e.arg?document.querySelector(e.arg):window;d&&(d.addEventListener("scroll",l,r),t._onScroll={handler:l,options:r,target:s?void 0:d})}function s(t){if(t._onScroll){var e=t._onScroll,i=e.handler,a=e.options,n=e.target,s=void 0===n?t:n;s.removeEventListener("scroll",i,a),delete t._onScroll}}var o={inserted:n,unbind:s};e["b"]=o}}]);
//# sourceMappingURL=chunk-76d29c67.1ac13ada.js.map